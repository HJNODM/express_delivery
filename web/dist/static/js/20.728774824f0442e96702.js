webpackJsonp([20],{cHak:function(e,t){},dP0r:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("gUGA"),a=r.n(n),s=r("YlI6"),o=r("aozt"),c=r.n(o),i={data:function(){return{noCompOrder:[],currentPage:1,pageSize:8,totalOrder:0,showPagination:!0,listType:{noCompBtn:!0},titleList:[{id:1,columnTitle:"发布时间",prop:"createTime",sortable:!0},{id:2,columnTitle:"订单价格(元)",prop:"Price",sortable:!0},{id:3,columnTitle:"订单状态",prop:"orderState",sortable:!1}]}},components:{userOrderList:s.a},created:function(){this.getUserOrder()},methods:{getUserOrder:function(){var e=this,t=this.$loading({lock:!0,text:"玩命加载中..."});c.a.get("/users/userCurrentOrder?size="+this.pageSize+"&page="+this.currentPage).then(function(r){var n=r.data;t.close(),"0"==n.status?(e.noCompOrder=n.result.orderList,e.totalOrder=a()(n.result.totalOrder),e.totalOrder<=e.pageSize&&(e.showPagination=!1)):console.log(n.msg)}).catch(function(e){console.log(e)})},handleCancel:function(e){var t=this;this.$confirm("此操作将取消订单, 是否继续?","取消订单",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){var r=t.$loading({lock:!0,text:"正在取消订单..."});c.a.get("/users/cancelCurrentOrder?orderId="+e.orderId).then(function(e){var n=e.data;(r.close(),"0"==n.status)?(t.$message({type:"success",message:"取消成功!"}),1===t.totalOrder%t.pageSize&&t.currentPage--,t.getUserOrder()):t.$message({type:"error",message:n.msg})}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},handleCompleted:function(e){var t=this;this.$confirm("是否确认送达,完成订单?","支付订单",{confirmButtonText:"确认",cancelButtonText:"取消",type:"success"}).then(function(){var r=t.$loading({lock:!0,text:"正在完成订单..."});c.a.post("/users/completedCurrentOrder",e).then(function(e){var n=e.data;(r.close(),"0"==n.status)?(t.$message({type:"success",message:"收货成功!"}),1===t.totalOrder%t.pageSize&&t.currentPage--,t.getUserOrder()):t.$message({type:"error",message:n.msg})}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},handleCurrentChange:function(e){this.currentPage=e,this.getUserOrder()}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"currentOrder"},[r("person-title",[e._v("当前位置 :: 我的订单 >> "),r("em",[e._v("当前订单")])]),e._v(" "),r("div",{staticClass:"currentOrder-cont"},[r("userOrderList",{attrs:{userOrder:e.noCompOrder,listType:e.listType,titleList:e.titleList},on:{CancelOrder:e.handleCancel,completedOrder:e.handleCompleted}})],1),e._v(" "),r("div",{staticClass:"pageination-oder"},[e.showPagination?r("el-pagination",{attrs:{background:"","current-page":e.currentPage,"pager-count":5,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.totalOrder},on:{"current-change":e.handleCurrentChange}}):e._e()],1)],1)},staticRenderFns:[]};var u=r("C7Lr")(i,l,!1,function(e){r("cHak")},null,null);t.default=u.exports}});