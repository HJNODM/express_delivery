webpackJsonp([11],{"+sq6":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("gUGA"),a=r.n(n),s=r("YlI6"),o=r("aozt"),i=r.n(o),c={data:function(){return{CompOrder:[],currentPage:1,pageSize:8,totalOrder:0,showPagination:!0,listType:{noCompBtn:!1},titleList:[{id:1,columnTitle:"完成时间",prop:"completedData",sortable:!0},{id:2,columnTitle:"订单价格(元)",prop:"Price",sortable:!0},{id:3,columnTitle:"订单状态",prop:"orderState",sortable:!1}]}},components:{userOrderList:s.a},mounted:function(){this.getHistoryOrder()},methods:{getHistoryOrder:function(){var e=this,t=this.$loading({lock:!0,text:"正在加载..."});i.a.get("/users/historyOrder?size="+this.pageSize+"&page="+this.currentPage).then(function(r){var n=r.data;t.close(),"0"==n.status&&(e.CompOrder=n.result.CompOrder,e.totalOrder=a()(n.result.totalOrder),e.totalOrder<=e.pageSize&&(e.showPagination=!1))}).catch(function(e){})},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){i.a.get("/users/deleteHistoryOrder?orderId="+e.orderId).then(function(e){var r=e.data;"0"==r.status?(t.$message({type:"success",message:"删除成功!"}),1===t.totalOrder%t.pageSize&&t.currentPage--,t.getHistoryOrder()):t.$message({type:"error",message:r.msg})}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleCurrentChange:function(e){this.currentPage=e,this.getHistoryOrder()}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"historyOrder"},[r("person-title",[e._v("当前位置 :: 我的订单 >> "),r("em",[e._v("历史订单")])]),e._v(" "),r("div",{staticClass:"hidtoryOrder-cont"},[r("userOrderList",{attrs:{userOrder:e.CompOrder,listType:e.listType,titleList:e.titleList},on:{DeleteOrder:e.handleDelete}})],1),e._v(" "),r("div",{staticClass:"pageination-oder"},[e.showPagination?r("el-pagination",{attrs:{background:"","current-page":e.currentPage,"pager-count":5,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.totalOrder},on:{"current-change":e.handleCurrentChange}}):e._e()],1)],1)},staticRenderFns:[]};var d=r("C7Lr")(c,l,!1,function(e){r("fXpr")},null,null);t.default=d.exports},fXpr:function(e,t){}});