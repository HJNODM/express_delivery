webpackJsonp([8],{FgJI:function(t,e){},imXc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("aozt"),s=i.n(o),a=i("M5pJ"),r=i.n(a),n={data:function(){var t=this,e=function(e,i,o){t.randomCode!=t.$data.loginForm.validateCode?o(new Error("验证码不正确 !")):o()};return{disabled:!1,inputType:"password",randomCode:"",codeImg:"",loginForm:{userId:"",passWord:"",validateCode:"",grade:0},loginRules:{userId:[{required:!0,message:"请输入账号",trigger:"blur"},{pattern:/^1[3-8][0-9]{9}$/,message:"手机号格式不正确",trigger:"blur"}],passWord:[{required:!0,message:"请输入密码",trigger:"blur"}],validateCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:e,trigger:"blur"},{validator:e,trigger:"change"}]},validateCodeImg:["./static/img/login-Verification-1.png","./static/img/login-Verification-2.png","./static/img/login-Verification-3.png","./static/img/login-Verification-4.png"]}},watch:{"loginForm.validateCode":function(t){t.length>=6&&(this.disabled=!0)}},mounted:function(){var t=this;this.randomCode=this.randomNum(),this.codeImg=this.randomCodeimg(),window.onkeydown=function(e){13==window.event.keyCode&&t.submitForm("loginForm")}},methods:{handleEditCode:function(){var t=this.loginForm.validateCode;this.disabled&&(this.loginForm.validateCode=t.slice(0,-1)),this.disabled=!1},randomNum:function(){return Math.random().toString(16).slice(-6)},randomCodeimg:function(){return this.validateCodeImg[Math.floor(4*Math.random())]},changeInputType:function(){this.inputType="password"==this.inputType?"text":"password"},handlechangeImg:function(){this.codeImg=this.randomCodeimg(),this.randomCode=this.randomNum()},userLogin:function(t,e){var i=this;s.a.post(t,e).then(function(t){var e=t.data;"0"==e.status?(i.$notify({title:"登录成功",message:"恭喜你! 登录成功!",duration:2e3,type:"success"}),i.$router.push({path:"/home"})):i.$notify({title:"登录失败",message:e.msg,duration:2e3,type:"error"})}).catch(function(t){})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var i=e.loginForm.passWord,o=r.a.utils.utf8.toBytes(i),s=new r.a.ModeOfOperation.ctr([6,9,16,11,3,6,2,3,4,2,8,2,5,9,8,2],new r.a.Counter(5)).encrypt(o),a=r.a.utils.hex.fromBytes(s),n={userId:e.loginForm.userId,passWord:a,grade:e.loginForm.grade};e.userLogin("/users/login",n)})},resetForm:function(t){this.$refs[t].resetFields()}},destroyed:function(){window.onkeydown=null}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right-login-body"},[t._m(0),t._v(" "),i("div",{staticClass:"form-cont"},[i("el-form",{ref:"loginForm",staticClass:"user-loginForm",attrs:{model:t.loginForm,rules:t.loginRules,"label-width":"7rem"}},[i("el-form-item",{attrs:{label:"账号",prop:"userId"}},[i("el-input",{attrs:{placeholder:"请输入账号"},model:{value:t.loginForm.userId,callback:function(e){t.$set(t.loginForm,"userId",e)},expression:"loginForm.userId"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"密码",prop:"passWord"}},[i("el-input",{attrs:{type:t.inputType,placeholder:"请输入密码"},model:{value:t.loginForm.passWord,callback:function(e){t.$set(t.loginForm,"passWord",e)},expression:"loginForm.passWord"}}),t._v(" "),i("i",{staticClass:"toggle el-icon-view",class:{color:""==t.loginForm.passWord},on:{click:t.changeInputType}})],1),t._v(" "),i("el-form-item",{staticClass:"code",attrs:{label:"验证码",prop:"validateCode"}},[i("label",[i("el-input",{attrs:{disabled:t.disabled},model:{value:t.loginForm.validateCode,callback:function(e){t.$set(t.loginForm,"validateCode","string"==typeof e?e.trim():e)},expression:"loginForm.validateCode"}}),t._v(" "),i("ul",{staticClass:"ul-code",on:{click:t.handleEditCode}},[i("li",{staticClass:"square"}),t._v(" "),i("li",{staticClass:"square"}),t._v(" "),i("li",{staticClass:"square"}),t._v(" "),i("li",{staticClass:"square"}),t._v(" "),i("li",{staticClass:"square"}),t._v(" "),i("li",{staticClass:"square"})])],1)]),t._v(" "),i("div",{staticClass:"rightCode"},[i("div",{staticClass:"rightCode-cont",on:{click:t.handlechangeImg}},[i("img",{staticClass:"Code-bg",attrs:{src:t.codeImg,alt:"验证码图片"}}),t._v(" "),i("span",{staticClass:"randomCode"},[t._v(t._s(t.randomCode))])])]),t._v(" "),i("el-form-item",{staticClass:"grade",attrs:{label:"级别 : ",prop:"grade"}},[i("el-radio-group",{model:{value:t.loginForm.grade,callback:function(e){t.$set(t.loginForm,"grade",t._n(e))},expression:"loginForm.grade"}},[i("el-radio",{attrs:{label:0}},[t._v("普通用户")]),t._v(" "),i("el-radio",{attrs:{label:1}},[t._v("工作人员")])],1)],1)],1)],1),t._v(" "),i("div",{staticClass:"right-cont-btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("loginForm")}}},[t._v("登录")]),t._v(" "),i("el-button",{on:{click:function(e){t.resetForm("loginForm")}}},[t._v("重置")])],1),t._v(" "),i("div",{staticClass:"footer"},[i("router-link",{staticClass:"link footer-left",attrs:{to:"/register"}},[t._v("注册")]),t._v(" "),i("router-link",{staticClass:"link footer-right",attrs:{to:"/forgotPassword"}},[t._v("忘记密码?")])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"top-header-cont"},[e("div",{staticClass:"head-pic"},[e("img",{attrs:{src:i("s/9k"),alt:"头像框"}})])])}]};var d=i("C7Lr")(n,l,!1,function(t){i("FgJI")},null,null);e.default=d.exports},"s/9k":function(t,e,i){t.exports=i.p+"static/img/login-head-pic.de92b0d.jpg"}});