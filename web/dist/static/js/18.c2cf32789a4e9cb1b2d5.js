webpackJsonp([18],{"57E5":function(s,o){},jBb1:function(s,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=e("M5pJ"),t=e.n(a),r=e("aozt"),n=e.n(r),d={data:function(){return{inputType:"password",passwordform:{oldPassword:"",newPassword:"",agNewPassword:""}}},mounted:function(){var s=this;window.onkeydown=function(o){13==window.event.keyCode&&s.handleChangePassword()}},methods:{testform:function(){var s=this.passwordform;return(""===s.oldPassword?"原密码不能为空!":""===s.newPassword&&"新密码不能为空!")||s.newPassword.length<6&&"密码不能少于6位!"||""===s.agNewPassword&&"请再次输入新密码!"||s.agNewPassword!==s.newPassword&&"两次密码不一样!"||""},changeInputType:function(){this.inputType="password"==this.inputType?"text":"password"},handleChangePassword:function(){var s=this,o=this.testform();if(""===o){var e=this.passwordform.newPassword,a=t.a.utils.utf8.toBytes(e),r=new t.a.ModeOfOperation.ctr([4,9,16,14,3,6,2,8,4,5,8,2,7,9,4,5],new t.a.Counter(5)).encrypt(a),d=t.a.utils.hex.fromBytes(r),i={oldPassword:this.passwordform.oldPassword,newPassword:d};n.a.post("/users/changePassword",i).then(function(o){var e=o.data;"0"==e.status?(s.$message({message:"修改成功!",type:"success",showClose:!0}),s.$router.push({path:"/login"}),n.a.post("/users/logout").then(function(o){var e=o.data;"0"==e.status?s.$store.commit("saveUserInfo",{userId:"",userName:""}):console.log(e.msg)}).catch(function(s){console.log(s)})):s.$message({message:e.msg,type:"error",showClose:!0})}).catch(function(s){console.log(s)})}else this.$message({message:o,type:"error"})}},destroyed:function(){window.onkeydown=null}},i={render:function(){var s=this,o=s.$createElement,e=s._self._c||o;return e("div",{staticClass:"changePassword-page"},[e("person-title",[s._v("当前位置 :: 个人中心 >> "),e("em",[s._v("修改密码")])]),s._v(" "),e("div",{staticClass:"changePassword-cont"},[e("div",{staticClass:"form-cont"},[e("div",{staticClass:"password-input"},[e("el-input",{attrs:{type:s.inputType,placeholder:"原密码"},model:{value:s.passwordform.oldPassword,callback:function(o){s.$set(s.passwordform,"oldPassword",o)},expression:"passwordform.oldPassword"}}),s._v(" "),e("i",{staticClass:"toggle el-icon-view",class:{color:""===s.passwordform.oldPassword},on:{click:s.changeInputType}})],1),s._v(" "),e("div",{staticClass:"password-input"},[e("el-input",{attrs:{type:s.inputType,placeholder:"新密码"},model:{value:s.passwordform.newPassword,callback:function(o){s.$set(s.passwordform,"newPassword",o)},expression:"passwordform.newPassword"}}),s._v(" "),e("i",{staticClass:"toggle el-icon-view",class:{color:""===s.passwordform.oldPassword},on:{click:s.changeInputType}})],1),s._v(" "),e("div",{staticClass:"password-input"},[e("el-input",{attrs:{type:s.inputType,placeholder:"再次输入新密码"},on:{keydown:s.handleChangePassword},model:{value:s.passwordform.agNewPassword,callback:function(o){s.$set(s.passwordform,"agNewPassword",o)},expression:"passwordform.agNewPassword"}}),s._v(" "),e("i",{staticClass:"toggle el-icon-view",class:{color:""===s.passwordform.oldPassword},on:{click:s.changeInputType}})],1),s._v(" "),e("el-button",{staticClass:"change",attrs:{type:"primary",plain:""},on:{click:s.handleChangePassword}},[s._v("确认修改")])],1)])],1)},staticRenderFns:[]};var l=e("C7Lr")(d,i,!1,function(s){e("57E5")},"data-v-9dd2d5d0",null);o.default=l.exports}});