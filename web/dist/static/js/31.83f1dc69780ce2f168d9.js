webpackJsonp([31],{"FMZ/":function(e,t){},sRBm:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("LHyU"),n=r("aozt"),o=r.n(n),i={data:function(){return{findOrderForm:{condition:"",answers:""},findOrder:[],titleList:[{id:1,columnTitle:"接单时间",prop:"receivedDate",sortable:!0},{id:2,columnTitle:"订单价格(元)",prop:"Price",sortable:!0},{id:3,columnTitle:"订单状态",prop:"orderState",sortable:!1}]}},components:{wokerOrderList:s.a},computed:{rightOptBtn:function(){return this.findOrder[0]&&"已完成"===this.findOrder[0].orderState?"historyBtn":"receiveOrderBtn"}},methods:{searchTest:function(){var e=this.findOrderForm.answers;switch(this.findOrderForm.condition){case"订单号":return/^\d{16}$/.test(e);default:return!1}},searchOrder:function(){var e=this;if(this.searchTest()){var t=this.$loading({lock:!0,text:"玩命加载中..."});o.a.post("/wokers/searchOrder",this.findOrderForm).then(function(r){var s=r.data;t.close(),"0"==s.status?e.findOrder=s.result:e.$message({type:"error",message:s.msg,showClose:!0})}).catch(function(e){t.close()})}else this.$message({type:"error",message:"订单格式不正确!",showClose:!0})},handleCompletedOrder:function(e){var t=this;this.$confirm("是否配送完成? 申请完成订单(此操作会向客户发起完成请求,\n            若客户2天内没有确认则系统自动确认","完成订单",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){var r=t.$loading({lock:!0,text:"玩命加载中..."});o.a.post("/wokers/completedOrde",e).then(function(e){var s=e.data;r.close(),"0"==s.status?t.$message({type:"success",message:"已向客户发起完成请求!"}):t.$message({type:"error",message:s.msg})}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},handleDeleteOrder:function(e){var t=this;this.$confirm("此订单删除无法恢复! 确认删除订单?","完成订单",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){var r=t.$loading({lock:!0,text:"玩命加载中..."});o.a.post("/wokers/deleteHistoryOrder",{orderId:e.orderId}).then(function(e){var s=e.data;r.close(),"0"==s.status?(t.$message({type:"success",message:"删除成功!"}),t.gehistoryOrderList()):t.$message({type:"error",message:s.msg})}).catch(function(e){r.close()})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wokerFindOrder-page"},[r("person-title",[e._v("当前位置 :: 我的订单 >> "),r("em",[e._v("查找订单")])]),e._v(" "),r("div",{staticClass:"findOrder-search"},[r("el-form",{staticClass:"user-findOrder",attrs:{inline:!0,model:e.findOrderForm}},[r("el-form-item",{attrs:{label:"查询条件"}},[r("el-select",{attrs:{placeholder:"选择查询条件"},model:{value:e.findOrderForm.condition,callback:function(t){e.$set(e.findOrderForm,"condition",t)},expression:"findOrderForm.condition"}},[r("el-option",{attrs:{label:"订单号",value:"订单号"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"请输入"}},[r("el-input",{attrs:{placeholder:"查询条件"},model:{value:e.findOrderForm.answers,callback:function(t){e.$set(e.findOrderForm,"answers",t)},expression:"findOrderForm.answers"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.searchOrder}},[e._v("查询")])],1)],1)],1),e._v(" "),r("wokerOrderList",{attrs:{userOrder:e.findOrder,rightOptBtn:e.rightOptBtn,titleList:e.titleList},on:{completedOrder:e.handleCompletedOrder}})],1)},staticRenderFns:[]};var d=r("C7Lr")(i,a,!1,function(e){r("FMZ/")},"data-v-3b471441",null);t.default=d.exports}});