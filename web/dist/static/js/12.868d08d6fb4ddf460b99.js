webpackJsonp([12],{L6T9:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("YlI6"),n=r("aozt"),o=r.n(n),a={data:function(){return{findOrderForm:{condition:"",answers:""},findOrder:[],titleList:[{id:1,columnTitle:"发布时间",prop:"createTime",sortable:!0},{id:2,columnTitle:"订单价格(元)",prop:"Price",sortable:!0},{id:3,columnTitle:"订单状态",prop:"orderState",sortable:!1}]}},components:{userOrderList:s.a},computed:{listType:function(){return this.findOrder[0]&&"已完成"===this.findOrder[0].orderState?{noCompBtn:!1}:{noCompBtn:!0}}},methods:{searchTest:function(){var e=this.findOrderForm.answers;switch(this.findOrderForm.condition){case"订单号":return/^\d{16}$/.test(e);default:return!1}},searchOrder:function(){var e=this;if(this.searchTest()){var t=this.$loading({lock:!0,text:"玩命加载中..."});o.a.post("/admin/searchOrder",this.findOrderForm).then(function(r){var s=r.data;t.close(),"0"==s.status?e.findOrder=s.result:e.$message({type:"error",message:s.msg,showClose:!0})}).catch(function(e){t.close()})}else this.$message({type:"error",message:"订单格式不正确!",showClose:!0})},handleCancel:function(e){var t=this;this.$confirm("此操作将取消订单, 是否继续?","取消订单",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){var r=t.$loading({lock:!0,text:"正在取消订单..."});o.a.get("/users/cancelCurrentOrder?orderId="+e.orderId).then(function(e){var s=e.data;r.close(),"0"==s.status?t.$message({type:"success",message:"取消成功!"}):t.$message({type:"error",message:s.msg})}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},handleCompleted:function(e){var t=this;this.$confirm("是否确认送达,完成订单?","支付订单",{confirmButtonText:"确认",cancelButtonText:"取消",type:"success"}).then(function(){var r=t.$loading({lock:!0,text:"正在完成订单..."});o.a.post("/users/completedCurrentOrder",e).then(function(e){var s=e.data;r.close(),"0"==s.status?t.$message({type:"success",message:"收货成功!"}):t.$message({type:"error",message:s.msg})}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){o.a.get("/users/deleteHistoryOrder?orderId="+e.orderId).then(function(e){var r=e.data;"0"==r.status?t.$message({type:"success",message:"删除成功!"}):t.$message({type:"error",message:r.msg})}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"findOrder-page"},[r("person-title",[e._v("当前位置 :: 我的订单 >> "),r("em",[e._v("当前订单")])]),e._v(" "),r("div",{staticClass:"findOrder-search"},[r("el-form",{staticClass:"user-findOrder",attrs:{inline:!0,model:e.findOrderForm}},[r("el-form-item",{attrs:{label:"查询条件"}},[r("el-select",{attrs:{placeholder:"选择查询条件"},model:{value:e.findOrderForm.condition,callback:function(t){e.$set(e.findOrderForm,"condition",t)},expression:"findOrderForm.condition"}},[r("el-option",{attrs:{label:"订单号",value:"订单号"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"请输入"}},[r("el-input",{attrs:{placeholder:"查询条件"},model:{value:e.findOrderForm.answers,callback:function(t){e.$set(e.findOrderForm,"answers",t)},expression:"findOrderForm.answers"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.searchOrder}},[e._v("查询")])],1)],1)],1),e._v(" "),r("userOrderList",{attrs:{userOrder:e.findOrder,listType:e.listType,titleList:e.titleList},on:{CancelOrder:e.handleCancel,completedOrder:e.handleCompleted,DeleteOrder:e.handleDelete}})],1)},staticRenderFns:[]};var c=r("C7Lr")(a,i,!1,function(e){r("cwuM")},"data-v-d04082b0",null);t.default=c.exports},cwuM:function(e,t){}});